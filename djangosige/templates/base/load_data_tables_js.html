{% load static %}

<script src="{% static 'js/jquery.dataTables.min.js' %}"></script> 
{# Verifique se você está usando o tema Bootstrap e se este arquivo existe no seu static/js #}
{# <script src="{% static 'js/dataTables.bootstrap.min.js' %}"></script> #}

{# Extensões de Botões - inclua apenas se você as usa e tem os arquivos #}
<script src="{% static 'js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'js/buttons.flash.min.js' %}"></script>
<script src="{% static 'js/jszip.min.js' %}"></script>
<script src="{% static 'js/pdfmake.min.js' %}"></script>
<script src="{% static 'js/vfs_fonts.js' %}"></script>
<script src="{% static 'js/buttons.html5.min.js' %}"></script>
<script src="{% static 'js/buttons.print.min.js' %}"></script>

<script type="text/javascript">
    $(function () {
        // Verifica se a biblioteca DataTable está carregada e se a tabela existe
        if (typeof $.fn.dataTable !== 'undefined' && $('#lista-database').length) {
            // Verifica se a tabela com id 'lista-database' JÁ É um DataTable
            if ( ! $.fn.dataTable.isDataTable( '#lista-database' ) ) {
                // Se não for, inicializa
                $('#lista-database').DataTable({
                    responsive: true,
                    // Configuração para botões de exportação (se você os quer)
                    // Se não quiser os botões, pode remover 'dom' e 'buttons'
                    //dom: 'Bfrtip', 
                   // buttons: [
                   //     'copy', 'csv', 'excel', 'pdf', 'print'
                  //  ],
                    "language": { // Tradução opcional para português
                        "sEmptyTable": "Nenhum registro encontrado",
                        "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                        "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                        "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                        "sInfoPostFix": "",
                        "sInfoThousands": ".",
                        "sLengthMenu": "_MENU_ resultados por página",
                        "sLoadingRecords": "Carregando...",
                        "sProcessing": "Processando...",
                        "sZeroRecords": "Nenhum registro encontrado",
                        "sSearch": "Pesquisar",
                        "oPaginate": {
                            "sNext": "Próximo",
                            "sPrevious": "Anterior",
                            "sFirst": "Primeiro",
                            "sLast": "Último"
                        },
                        "oAria": {
                            "sSortAscending": ": Ordenar colunas de forma ascendente",
                            "sSortDescending": ": Ordenar colunas de forma descendente"
                        }
                    }
                    // Adicione outras opções do DataTables aqui se necessário
                    // Ex: "pageLength": 25,
                });
            } else {
                // Opcional: logar que já foi inicializado
                // console.log('DataTable #lista-database já foi inicializado.');
            }
        } else {
            if (typeof $.fn.dataTable === 'undefined') {
                console.warn('Biblioteca DataTables não carregada.');
            }
            if ($('#lista-database').length === 0) {
                console.warn('Tabela com id #lista-database não encontrada na página.');
            }
        }
    });
</script>